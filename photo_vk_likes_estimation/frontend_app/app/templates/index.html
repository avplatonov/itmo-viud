<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">

    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
          integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
            integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
            crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
            integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
            crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
            integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
            crossorigin="anonymous"></script>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>

    <script type="text/javascript">
        (function (m, e, t, r, i, k, a) {
            m[i] = m[i] || function () {
                (m[i].a = m[i].a || []).push(arguments)
            };
            m[i].l = 1 * new Date();
            k = e.createElement(t), a = e.getElementsByTagName(t)[0], k.async = 1, k.src = r, a.parentNode.insertBefore(k, a)
        })
        (window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");

        ym(70864636, "init", {
            clickmap: true,
            trackLinks: true,
            accurateTrackBounce: true
        });
    </script>
    <noscript>
        <div><img src="https://mc.yandex.ru/watch/70864636" style="position:absolute; left:-9999px;" alt=""/></div>
    </noscript>

    <title>–û—Ü–µ–Ω–∫–∞ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π</title>
</head>
<body>
<div class="container mt-5">
    <div class="row">
        <div class="col">
            <h2>–û—Ü–µ–Ω–∫–∞ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π</h2>
            <h6>–ú–Ω–æ–≥–æ –ª–∏ –ª–∞–π–∫–æ–≤ –Ω–∞–±–µ—Ä—ë—Ç —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è –≤ –ø–∞–±–ª–∏–∫–µ –∑–Ω–∞–∫–æ–º—Å—Ç–≤ –í–ö?</h6>
            <form action="/" method="post" class="form mt-4 d-flex" enctype="multipart/form-data">
                <input type="file" accept="image/jpeg,image/png" class="flex-grow-1" name="file" id="dropzone-file">
                <button type="submit" class="btn btn-primary" id="dropzone-submit" disabled>–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
            </form>
            {% if result %}
                <div class="d-flex mt-4">
                    <img alt="–û—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ" src="{{ result.image_dataurl }}"/>
                    <div id="plot" class="w-100"></div>
                </div>
                <script>
                    common = {
                        y: [""],
                        type: 'bar',
                        textposition: 'inside',
                        orientation: 'h',
                    }

                    Plotly.newPlot('plot', [{
                        x: [{{ result.lo }}],
                        name: "lo",
                        marker: {
                            color: '#FFB6B3',
                        },
                        ...common
                    }, {
                        x: [{{ result.mid }}],
                        name: "mid",
                        marker: {
                            color: '#F1EDD5',
                        },
                        ...common
                    }, {
                        x: [{{ result.hi }}],
                        name: "hi",
                        marker: {
                            color: '#BDE7BD',
                        },
                        ...common
                    }
                    ], {
                        margin: {b: 40, t: 40},
                        barmode: 'stack',
                    });
                </script>
            {% endif %}
            <hr class="mt-4"/>
            <div class="text-muted">
                <p>PS. –ö –æ—Ü–µ–Ω–∫–∞–º –º–æ–¥–µ–ª–∏ —Å—Ç–æ–∏—Ç –æ—Ç–Ω–æ—Å–∏—Ç—å—Å—è –ª–∏—à—å –∫–∞–∫ –∫ –ø—Ä–µ–¥–ø–æ–ª–æ–∂–µ–Ω–∏—è–º, –∏–º–µ—é—â–∏–º –Ω–∏–∑–∫—É—é —Å—Ç–µ–ø–µ–Ω—å –¥–æ—Å—Ç–æ–≤–µ—Ä–Ω–æ—Å—Ç–∏
                    –∏ —Ç–æ—á–Ω–æ—Å—Ç–∏.</p>
                <p>–ê–Ω–∞–ª–∏–∑ —Å–æ–±—Ä–∞–Ω–Ω—ã—Ö –¥–ª—è —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ –º–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö —Å —Å–æ—Ü—Å–µ—Ç–µ–π –ø–æ–∫–∞–∑–∞–ª, —á—Ç–æ –¥–∞–∂–µ –ø–æ—Ö–æ–∂–∏–µ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ —á–∞—Å—Ç–æ
                    –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç —Å–æ–≤–µ—Ä—à–µ–Ω–Ω–æ —Ä–∞–∑–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ —Ç–µ–º –∏–ª–∏ –∏–Ω—ã–º (—Å–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ, —Å–ª—É—á–∞–π–Ω—ã–º) –ø—Ä–∏—á–∏–Ω–∞–º.</p>
                <p>–¢–æ—á–Ω–æ—Å—Ç—å –º–æ–¥–µ–ª–∏, –Ω–µ—Å–º–æ—Ç—Ä—è –Ω–∞ –ø–æ–ø—ã—Ç–∫–∏ –µ—ë —É–ª—É—á—à–∏—Ç—å, –Ω–∏–∫–æ–≥–¥–∞ <b>–Ω–µ –ø–æ–¥–Ω–∏–º–∞–ª–∞—Å—å –≤—ã—à–µ 55% –≤–µ—Ä–Ω–æ
                    –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã—Ö –∫–ª–∞—Å—Å–æ–≤ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π</b>.</p>
                <p>PPS. –î–∞, –º–æ–¥–µ–ª—å —Å—Ç–∞–±–∏–ª—å–Ω–æ –¥–∏—Å–∫—Ä–∏–º–∏–Ω–∏—Ä—É–µ—Ç –ø–∞—Ä–Ω–µ–π. –¢–∞–∫–æ–≤—ã –¥–∞–Ω–Ω—ã–µ, —Ç–∞–∫–æ–≤–∞ —Ä–µ–∞–ª—å–Ω–æ—Å—Ç—å ü§∑‚Äç‚ôÇÔ∏è</p>
            </div>
        </div>
    </div>
</div>
<script>
    jQuery("#dropzone-file").change(v => {
        jQuery("#dropzone-submit").prop("disabled", v.target.value === "")
    })
</script>
</body>
</html>